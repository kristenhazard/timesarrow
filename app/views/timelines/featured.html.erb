<h1>Featured Timelines</h1>
<table>
<% @timelines.each do |timeline| %>
  <tr>
    <td>
      <!--<%=h timeline.name %>-->
      <%= link_to timeline.name, timeline %>
    </td>
  </tr>
  <tr>
    <td>
    <div class="parent-container">
    <div id="horizontal_carousel_small_<%= timeline.id %>" class="horizontal_carousel_small">
      <div class="previous_button"></div>  
      <div class="container">
        <ul>
        <% timeline.timeline_items.each do |timelineitem| %>
          <% content_tag_for :li, timelineitem do %>
          <div id="timelineitem-name-<%= timelineitem.id %>" class='timelineitem-name'>
                <% if timelineitem.item.smallimageurl.nil? %>
                  <%= link_to timelineitem.item.title, :controller => 'timeline_items', 
                                                       :id => timelineitem.id,
                                                       :action => 'popup' %>
                <% else %>
                  <%= link_to image_tag(timelineitem.item.smallimageurl, :alt => timelineitem.item.title), 
                              :controller => 'timeline_items', 
                              :id => timelineitem.id,
                              :action => 'popup' %>
                <% end %>
          </div>
          <span class="posdesc">
            <% unless timelineitem.position_desc.eql? 'set' %>
              <%=h timelineitem.position_desc %>
            <% end %>
          </span>
          <% end %>
        <% end %>
        </ul>
      </div>
      <div class="next_button"></div>
    </div>
    </div>
    </td>
  </tr>
<% end %>
</table>
<!-- carousel -->
<% @timelines.each do |timeline| %>
  <script>
    new UI.Carousel("horizontal_carousel_small_"+ <%= timeline.id %>);
  </script>
<% end %>